!function(e){var t,l="gallery-library",n=document.getElementById("rsg_galleryImages_button"),a=document.getElementById("rsg_galleryImages"),o=a.value,r=""==o?[]:o.split(",");console.log("imagesIds",o);n.addEventListener("click",function(e,n){e.preventDefault(),t?t.open():(r.length>0&&(l="gallery-edit"),(t=new wp.media.view.roboWpGallery({multiple:!0,state:l,library:{order:"ASC",orderby:"title",type:"image",search:null,uploadedTo:null,multiple:!0}})).on("ready",function(){if(0!=r.length){var e=t.state().get("library");wp.media.query({post__in:r}).more().then(),r.forEach(function(t){var l=wp.media.attachment(t);e.add(l)})}}),t.on("open",function(){0!=r.length&&"gallery-edit"!=l&&(t.setState("gallery-edit"),t.options.state="gallery-edit",l="gallery-edit")}),t.on("insert",function(){var e=t.state().get("selection");console.log(e)}),t.on("update",function(e){var l,n=t.state();if(l=e||n.get("selection")){var i=l.toJSON();if(0!=i.length){r=[];for(var g=0;g<i.length;g++)r.push(i[g].id);o=r.join(","),a.value=o}}else console.log("return selection")}),t.open())})}(jQuery);